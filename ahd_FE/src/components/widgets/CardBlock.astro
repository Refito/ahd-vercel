---
import Headline from '~/components/ui/Headline.astro';
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import CardItem from '~/components/ui/CardItem.astro';

type ImageInput = string | { src: string; alt?: string };
type CardItemInfo = { image?: ImageInput; title?: string; description?: string };

const {
  title = '',
  subtitle = '',
  items = [],

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
}: {
  title?: string;
  subtitle?: string;
  items?: CardItemInfo[];
  id?: string;
  isDark?: boolean;
  classes?: { container?: string };
  bg?: string | undefined;
} = Astro.props;
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''} py-6 md:py-8 lg:py-8`}
  bg={bg}
>
  <Headline title={title} subtitle={subtitle} />

  {
    items && items.length > 0 && (
      <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-8 mx-4 md:mx-8">
        {items.map((item) => (
          <div class="intersect-once motion-safe:md:opacity-0 motion-safe:md:intersect:animate-fade">
            <CardItem image={item.image} title={item.title} description={item.description} />
          </div>
        ))}
      </div>
    )
  }
</WidgetWrapper>
