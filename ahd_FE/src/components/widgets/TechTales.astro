---
import WidgetWrapper from '~/components/ui/WidgetWrapper.astro';
import Button from '~/components/ui/Button.astro';

type Link = { title?: string; url?: string; target?: string | null } | undefined;

const {
  titleHtml = '',
  subtitleLink,
  descriptionHtml = '',
  nameHtml = '',
  dateHtml = '',
  discoverHtml = '',
  readMore,

  id,
  isDark = false,
  classes = {},
  bg = await Astro.slots.render('bg'),
}: {
  titleHtml?: string;
  subtitleLink?: Link;
  descriptionHtml?: string;
  nameHtml?: string;
  dateHtml?: string;
  discoverHtml?: string;
  readMore?: Link;
  id?: string;
  isDark?: boolean;
  classes?: { container?: string };
  bg?: string | undefined;
} = Astro.props;

const defaultBg =
  '<div class="absolute inset-0" style="background-image: linear-gradient(rgba(245, 248, 250, 1), rgba(245, 248, 250, 1)) !important;"></div>';
---

<WidgetWrapper
  id={id}
  isDark={isDark}
  containerClass={`max-w-7xl mx-auto ${classes?.container ?? ''} py-6 md:py-8 lg:py-8`}
  bg={bg ?? defaultBg}
>
  <div class="mx-auto py-0 md:py-0 lg:py-0">
    <div class="m-auto max-w-5xl md:py-6 lg:py-8 text-gray-900 dark:text-gray-900">
      {
        titleHtml && (
          <h2 class="text-3xl md:text-4xl leading-tight text-center font-bold tracking-tighter font-heading mb-6">
            <Fragment set:html={titleHtml} />
          </h2>
        )
      }

      {
        subtitleLink && subtitleLink.title && (
          <div class="text-start mb-6">
            <a
              href={subtitleLink.url}
              {...(subtitleLink.target ? { target: subtitleLink.target, rel: 'noopener noreferrer' } : {})}
              class="text-base md:text-lg font-semibold"
            >
              {subtitleLink.title}
            </a>
          </div>
        )
      }

      {
        descriptionHtml && (
          <p class="text-2xl md:text-4xl leading-[1.2] text-left font-bold mb-6">
            <Fragment set:html={descriptionHtml} />
          </p>
        )
      }

      <div class="mt-4">
        {
          nameHtml && (
            <p class="text-base md:text-lg text-left font-medium">
              <Fragment set:html={nameHtml} />
            </p>
          )
        }
        {
          dateHtml && (
            <p class="text-sm md:text-base text-left mt-1">
              <Fragment set:html={dateHtml} />
            </p>
          )
        }
      </div>

      {
        discoverHtml && (
          <div class="mt-6">
            <p class="text-lg md:text-xl text-left">
              <Fragment set:html={discoverHtml} />
            </p>
          </div>
        )
      }

      {
        readMore?.url && readMore?.title && (
          <div class="mt-8 flex justify-start">
            <Button variant="primary" href={readMore.url} target={readMore.target ?? undefined} class="px-6 py-3">
              {readMore.title}
            </Button>
          </div>
        )
      }
    </div>
  </div>
</WidgetWrapper>
