---
import Image from '~/components/common/Image.astro';

type ImageInput = string | { src: string; alt?: string };

const {
  image,
  title = '',
  description = '',
}: { image?: ImageInput; title?: string; description?: string } = Astro.props;
---

<div class="flex flex-col items-center text-center p-4">
  {
    image && (
      <div class="mb-4 w-full flex justify-center">
        {typeof image === 'string' ? (
          <img src={image} alt="" class="h-20 w-auto" loading="lazy" decoding="async" />
        ) : (image as { src?: string }).src && /^(https?:)?\/\//.test((image as { src: string }).src) ? (
          <img
            src={(image as { src: string }).src}
            alt={(image as { alt?: string }).alt ?? ''}
            class="h-20 w-auto filter invert-50"
            loading="lazy"
            decoding="async"
          />
        ) : (
          <Image class="h-20 w-auto" width={160} height={160} {...(image as { src: string; alt?: string })} />
        )}
      </div>
    )
  }

  {title && <h3 class="text-lg font-semibold mb-2 text-default dark:text-white transition-none">{title}</h3>}
  {description && <p class="text-sm text-muted dark:text-slate-400">{description}</p>}
</div>
